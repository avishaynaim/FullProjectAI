import{b as Y}from"./chunk-NX7NRQ5P.js";import{a as oe,b as ne}from"./chunk-OBN4BFR2.js";import{a as R,g as z,j as q,m as G,p as J}from"./chunk-OCQI5GMN.js";import{a as ce}from"./chunk-3AODB45S.js";import{m as re,n as ae,o as se,p as le}from"./chunk-3WJCVL2W.js";import{a as U,b as X}from"./chunk-QB7MGXM7.js";import{e as Z,h as $,k as ee,s as te,v as ie}from"./chunk-QERIUF64.js";import{$a as v,$d as K,Bb as A,Cb as N,Da as e,Ea as t,Fa as D,Ga as L,Ha as V,Ja as x,Ka as u,La as p,Nd as H,Qb as W,Sb as F,T as m,Ta as l,U as d,Ua as _,Xa as j,Ya as P,Za as h,_a as k,a as E,ab as I,be as Q,dd as b,ga as c,hd as C,ib as w,jb as y,ka as f,ld as O,ma as M,ra as S,ua as g,xa as T,yb as B}from"./chunk-KTDYQ5NR.js";var me=()=>[10,25,50],de=()=>({width:"500px"}),ue=s=>["/projects",s];function ge(s,i){s&1&&(e(0,"tr")(1,"th"),l(2,"Name"),t(),e(3,"th"),l(4,"Description"),t(),e(5,"th"),l(6,"Created Date"),t(),e(7,"th"),l(8,"Last Modified"),t(),e(9,"th",12),l(10,"Actions"),t()())}function _e(s,i){if(s&1){let o=x();e(0,"tr")(1,"td"),l(2),t(),e(3,"td"),l(4),t(),e(5,"td"),l(6),w(7,"date"),t(),e(8,"td"),l(9),w(10,"date"),t(),e(11,"td")(12,"div",13),D(13,"button",14),e(14,"button",15),u("click",function(){let n=m(o).$implicit,a=p();return d(a.showEditDialog(n))}),t(),e(15,"button",16),u("click",function(){let n=m(o).$implicit,a=p();return d(a.confirmDelete(n))}),t()()()()}if(s&2){let o=i.$implicit;c(2),_(o.name),c(2),_(o.description),c(2),_(y(7,5,o.createdDate)),c(3),_(y(10,7,o.lastModifiedDate)),c(4),g("routerLink",I(9,ue,o.id))}}function fe(s,i){s&1&&(e(0,"tr")(1,"td",17),l(2," No projects found. "),t()())}function je(s,i){if(s&1){let o=x();L(0),e(1,"div",18)(2,"div",19)(3,"label",20),l(4,"Name"),t(),e(5,"input",21),h("ngModelChange",function(n){m(o);let a=p();return P(a.editingProject.name,n)||(a.editingProject.name=n),d(n)}),t()(),e(6,"div",19)(7,"label",22),l(8,"Description"),t(),e(9,"textarea",23),h("ngModelChange",function(n){m(o);let a=p();return P(a.editingProject.description,n)||(a.editingProject.description=n),d(n)}),t()(),e(10,"div",24)(11,"button",25),u("click",function(){m(o);let n=p();return d(n.dialogVisible=!1)}),t(),e(12,"button",26),u("click",function(){m(o);let n=p();return d(n.saveProject())}),t()()(),V()}if(s&2){let o=p();c(5),j("ngModel",o.editingProject.name),c(4),j("ngModel",o.editingProject.description)}}var pe=class s{constructor(i,o,r){this.store=i;this.confirmationService=o;this.messageService=r}projects=[];loading=!1;dialogVisible=!1;dialogHeader="";editingProject={};isEditing=!1;ngOnInit(){this.loadProjects(),this.store.select(oe).subscribe(i=>{this.projects=i}),this.store.select(ne).subscribe(i=>{this.loading=i})}loadProjects(){this.store.dispatch(R())}showCreateDialog(){this.editingProject={},this.dialogHeader="Create New Project",this.isEditing=!1,this.dialogVisible=!0}showEditDialog(i){this.editingProject=E({},i),this.dialogHeader="Edit Project",this.isEditing=!0,this.dialogVisible=!0}saveProject(){if(this.isEditing){let i=this.editingProject;this.store.dispatch(q({project:i})),this.messageService.add({severity:"success",summary:"Success",detail:"Project updated successfully"})}else{let i={id:"",name:this.editingProject.name||"",description:this.editingProject.description||"",createdDate:new Date,lastModifiedDate:new Date,roots:[]};this.store.dispatch(z({project:i})),this.messageService.add({severity:"success",summary:"Success",detail:"Project created successfully"})}this.dialogVisible=!1}confirmDelete(i){this.confirmationService.confirm({message:`Are you sure you want to delete the project "${i.name}"?`,header:"Confirm Delete",icon:"pi pi-exclamation-triangle",accept:()=>{this.store.dispatch(G({id:i.id})),this.messageService.add({severity:"success",summary:"Success",detail:"Project deleted successfully"})}})}onSearch(i){i?this.store.dispatch(J({term:i})):this.loadProjects()}onClearSearch(){this.loadProjects()}static \u0275fac=function(o){return new(o||s)(f(H),f(b),f(C))};static \u0275cmp=M({type:s,selectors:[["app-project-list"]],features:[k([C,b])],decls:14,vars:16,consts:[[1,"card"],[1,"p-toolbar-group-start"],[1,"text-2xl","font-bold","m-0"],[1,"p-toolbar-group-end"],[3,"search","clear"],["pButton","","type","button","label","New Project","icon","pi pi-plus",1,"ml-2",3,"click"],["styleClass","p-datatable-sm p-datatable-gridlines mt-2","responsiveLayout","scroll",3,"value","loading","paginator","rows","rowsPerPageOptions","showCurrentPageReport"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[3,"visibleChange","visible","header","modal","draggable","resizable"],[4,"ngIf"],[2,"width","150px"],[1,"flex","gap-2"],["pButton","","type","button","icon","pi pi-eye","pTooltip","View",1,"p-button-sm","p-button-info",3,"routerLink"],["pButton","","type","button","icon","pi pi-pencil","pTooltip","Edit",1,"p-button-sm","p-button-success",3,"click"],["pButton","","type","button","icon","pi pi-trash","pTooltip","Delete",1,"p-button-sm","p-button-danger",3,"click"],["colspan","5",1,"text-center","p-4"],[1,"p-fluid"],[1,"field"],["for","name",1,"font-bold"],["id","name","type","text","pInputText","",1,"w-full",3,"ngModelChange","ngModel"],["for","description",1,"font-bold"],["id","description","pInputTextarea","","rows","3",1,"w-full",3,"ngModelChange","ngModel"],[1,"flex","justify-content-end","gap-2","mt-4"],["pButton","","type","button","label","Cancel",1,"p-button-outlined",3,"click"],["pButton","","type","button","label","Save",3,"click"]],template:function(o,r){o&1&&(e(0,"div",0)(1,"p-toolbar")(2,"div",1)(3,"h1",2),l(4,"Projects"),t()(),e(5,"div",3)(6,"app-search-box",4),u("search",function(a){return r.onSearch(a)})("clear",function(){return r.onClearSearch()}),t(),e(7,"button",5),u("click",function(){return r.showCreateDialog()}),t()()(),e(8,"p-table",6),S(9,ge,11,0,"ng-template",7)(10,_e,16,11,"ng-template",8)(11,fe,3,0,"ng-template",9),t()(),e(12,"p-dialog",10),h("visibleChange",function(a){return P(r.dialogVisible,a)||(r.dialogVisible=a),a}),S(13,je,13,2,"ng-container",11),t()),o&2&&(c(8),g("value",r.projects)("loading",r.loading)("paginator",!0)("rows",10)("rowsPerPageOptions",v(14,me))("showCurrentPageReport",!0),c(4),T(v(15,de)),j("visible",r.dialogVisible),g("header",r.dialogHeader)("modal",!0)("draggable",!1)("resizable",!1),c(),g("ngIf",r.dialogVisible))},dependencies:[N,B,A,F,W,ie,O,ae,re,Q,K,X,U,le,se,Y,ce,te,Z,$,ee],encapsulation:2})};export{pe as ProjectListComponent};
